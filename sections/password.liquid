{% comment %}
  SW Password / Coming Soon Page
  - Tailwind class prefix: sw-
  - Add this section to a template: templates/password.json (or use in a password template)
{% endcomment %}

<section
  class="sw-min-h-screen sw-w-full sw-flex sw-items-center sw-justify-center sw-bg-gradient-to-br sw-from-slate-950 sw-via-slate-900 sw-to-slate-950 sw-text-white sw-relative sw-overflow-hidden"
>
  <!-- decorative glow blobs -->
  <div class="sw-absolute sw--top-24 sw--left-24 sw-h-72 sw-w-72 sw-rounded-full sw-bg-cyan-500/20 sw-blur-3xl"></div>
  <div class="sw-absolute sw-top-32 sw--right-24 sw-h-80 sw-w-80 sw-rounded-full sw-bg-fuchsia-500/20 sw-blur-3xl"></div>
  <div class="sw-absolute sw-bottom-0 sw-left-1/2 sw--translate-x-1/2 sw-h-96 sw-w-[40rem] sw-rounded-full sw-bg-emerald-500/10 sw-blur-3xl"></div>

  <div class="sw-relative sw-z-10 sw-w-full sw-max-w-6xl sw-px-5 sm:sw-px-8 sw-py-12">
    <div class="sw-grid sw-grid-cols-1 lg:sw-grid-cols-2 sw-gap-10 sw-items-center">
      <!-- LEFT -->
      <div class="sw-space-y-6">
        <div class="sw-inline-flex sw-items-center sw-gap-2 sw-rounded-full sw-border sw-border-white/10 sw-bg-white/5 sw-px-4 sw-py-2 sw-text-sm sw-text-white/80">
          <span class="sw-inline-block sw-h-2 sw-w-2 sw-rounded-full sw-bg-emerald-400 sw-animate-pulse"></span>
          <span>{{ section.settings.badge_text }}</span>
        </div>

        <h1 class="sw-text-4xl sm:sw-text-5xl sw-font-semibold sw-leading-tight">
          {{ section.settings.heading }}
          <span class="sw-text-transparent sw-bg-clip-text sw-bg-gradient-to-r sw-from-cyan-300 sw-to-fuchsia-300">
            {{ section.settings.heading_highlight }}
          </span>
        </h1>

        <p class="sw-text-base sm:sw-text-lg sw-text-white/70 sw-max-w-xl">
          {{ section.settings.subheading }}
        </p>

        <!-- Feature chips -->
        <div class="sw-flex sw-flex-wrap sw-gap-2">
          {% for block in section.blocks %}
            {% if block.type == 'chip' %}
              <span class="sw-rounded-full sw-border sw-border-white/10 sw-bg-white/5 sw-px-4 sw-py-2 sw-text-sm sw-text-white/80">
                {{ block.settings.text }}
              </span>
            {% endif %}
          {% endfor %}
        </div>

        <!-- Social -->
        <div class="sw-flex sw-items-center sw-gap-3 sw-pt-2">
          {% if section.settings.social_instagram != blank %}
            <a class="sw-inline-flex sw-items-center sw-justify-center sw-h-10 sw-w-10 sw-rounded-xl sw-border sw-border-white/10 sw-bg-white/5 hover:sw-bg-white/10 sw-transition"
               href="{{ section.settings.social_instagram }}" target="_blank" rel="nofollow noopener">
              <span class="sw-text-sm">IG</span>
            </a>
          {% endif %}
          {% if section.settings.social_youtube != blank %}
            <a class="sw-inline-flex sw-items-center sw-justify-center sw-h-10 sw-w-10 sw-rounded-xl sw-border sw-border-white/10 sw-bg-white/5 hover:sw-bg-white/10 sw-transition"
               href="{{ section.settings.social_youtube }}" target="_blank" rel="nofollow noopener">
              <span class="sw-text-sm">YT</span>
            </a>
          {% endif %}
          {% if section.settings.social_facebook != blank %}
            <a class="sw-inline-flex sw-items-center sw-justify-center sw-h-10 sw-w-10 sw-rounded-xl sw-border sw-border-white/10 sw-bg-white/5 hover:sw-bg-white/10 sw-transition"
               href="{{ section.settings.social_facebook }}" target="_blank" rel="nofollow noopener">
              <span class="sw-text-sm">FB</span>
            </a>
          {% endif %}

          <div class="sw-text-xs sw-text-white/50 sw-ml-2">
            {{ section.settings.footer_note }}
          </div>
        </div>
      </div>

      <!-- RIGHT -->
      <div class="sw-w-full">
        <div class="sw-rounded-3xl sw-border sw-border-white/10 sw-bg-white/5 sw-shadow-2xl sw-backdrop-blur-xl sw-p-6 sm:sw-p-8">
          <!-- logo -->
          {% if section.settings.logo != blank %}
            <div class="sw-flex sw-justify-center sw-mb-5">
              <img
                src="{{ section.settings.logo | image_url: width: 360 }}"
                alt="{{ shop.name | escape }}"
                class="sw-h-14 sw-w-auto"
                loading="lazy"
              />
            </div>
          {% else %}
            <div class="sw-flex sw-justify-center sw-mb-5">
              <div class="sw-text-lg sw-font-semibold sw-text-white/90">{{ shop.name }}</div>
            </div>
          {% endif %}

          <!-- countdown (optional) -->
          {% if section.settings.enable_countdown %}
            <div class="sw-rounded-2xl sw-border sw-border-white/10 sw-bg-black/20 sw-p-4 sw-mb-5">
              <div class="sw-text-xs sw-text-white/60 sw-text-center sw-mb-2">
                {{ section.settings.countdown_label }}
              </div>
              <div id="swCountdown" class="sw-grid sw-grid-cols-4 sw-gap-2 sw-text-center">
                <div class="sw-rounded-xl sw-bg-white/5 sw-border sw-border-white/10 sw-py-3">
                  <div class="sw-text-2xl sw-font-semibold" data-d>00</div>
                  <div class="sw-text-[11px] sw-text-white/60">Days</div>
                </div>
                <div class="sw-rounded-xl sw-bg-white/5 sw-border sw-border-white/10 sw-py-3">
                  <div class="sw-text-2xl sw-font-semibold" data-h>00</div>
                  <div class="sw-text-[11px] sw-text-white/60">Hours</div>
                </div>
                <div class="sw-rounded-xl sw-bg-white/5 sw-border sw-border-white/10 sw-py-3">
                  <div class="sw-text-2xl sw-font-semibold" data-m>00</div>
                  <div class="sw-text-[11px] sw-text-white/60">Min</div>
                </div>
                <div class="sw-rounded-xl sw-bg-white/5 sw-border sw-border-white/10 sw-py-3">
                  <div class="sw-text-2xl sw-font-semibold" data-s>00</div>
                  <div class="sw-text-[11px] sw-text-white/60">Sec</div>
                </div>
              </div>
            </div>
          {% endif %}

          <!-- password form -->
          <div class="sw-space-y-4">
            <div class="sw-text-center">
              <h2 class="sw-text-xl sw-font-semibold sw-text-white/90">{{ section.settings.form_heading }}</h2>
              <p class="sw-text-sm sw-text-white/60 sw-mt-1">{{ section.settings.form_subheading }}</p>
            </div>

            {% form 'storefront_password' %}
              {% if form.errors %}
                <div class="sw-rounded-2xl sw-border sw-border-red-500/30 sw-bg-red-500/10 sw-p-3 sw-text-sm sw-text-red-100">
                  {{ form.errors | default_errors }}
                </div>
              {% endif %}

              <div class="sw-flex sw-flex-col sm:sw-flex-row sw-gap-3">
                <label class="sw-sr-only" for="Password">{{ 'general.password_page.login_form_password_label' | t }}</label>
                <input
                  id="Password"
                  type="password"
                  name="password"
                  autocomplete="current-password"
                  placeholder="{{ section.settings.password_placeholder }}"
                  class="sw-w-full sw-rounded-2xl sw-border sw-border-white/10 sw-bg-black/30 sw-px-4 sw-py-3 sw-text-white sw-placeholder:sw-text-white/40 focus:sw-outline-none focus:sw-ring-2 focus:sw-ring-cyan-300/50"
                />
                <button
                  type="submit"
                  class="sw-rounded-2xl sw-bg-gradient-to-r sw-from-cyan-400 sw-to-fuchsia-400 sw-text-slate-950 sw-font-semibold sw-px-5 sw-py-3 hover:sw-opacity-95 sw-transition sw-whitespace-nowrap"
                >
                  {{ section.settings.button_text }}
                </button>
              </div>

              <div class="sw-text-xs sw-text-white/50 sw-text-center sw-mt-3">
                {{ section.settings.small_help }}
              </div>
            {% endform %}
          </div>

          <!-- newsletter -->
          {% if section.settings.enable_newsletter %}
            <div class="sw-mt-6 sw-pt-6 sw-border-t sw-border-white/10">
              <div class="sw-text-center sw-mb-3">
                <div class="sw-text-sm sw-font-semibold sw-text-white/90">{{ section.settings.newsletter_heading }}</div>
                <div class="sw-text-xs sw-text-white/60">{{ section.settings.newsletter_subheading }}</div>
              </div>

              {% form 'customer' %}
                <input type="hidden" name="contact[tags]" value="password-page" />
                <div class="sw-flex sw-flex-col sm:sw-flex-row sw-gap-3">
                  <input
                    type="email"
                    name="contact[email]"
                    required
                    placeholder="{{ section.settings.newsletter_placeholder }}"
                    class="sw-w-full sw-rounded-2xl sw-border sw-border-white/10 sw-bg-black/30 sw-px-4 sw-py-3 sw-text-white sw-placeholder:sw-text-white/40 focus:sw-outline-none focus:sw-ring-2 focus:sw-ring-fuchsia-300/50"
                  />
                  <button
                    type="submit"
                    class="sw-rounded-2xl sw-border sw-border-white/10 sw-bg-white/10 sw-text-white sw-font-semibold sw-px-5 sw-py-3 hover:sw-bg-white/15 sw-transition sw-whitespace-nowrap"
                  >
                    {{ section.settings.newsletter_button_text }}
                  </button>
                </div>

                {% if form.posted_successfully? %}
                  <div class="sw-mt-3 sw-rounded-2xl sw-border sw-border-emerald-400/30 sw-bg-emerald-500/10 sw-p-3 sw-text-sm sw-text-emerald-100 sw-text-center">
                    {{ section.settings.newsletter_success }}
                  </div>
                {% endif %}
              {% endform %}
            </div>
          {% endif %}
        </div>

        <div class="sw-text-center sw-text-xs sw-text-white/40 sw-mt-5">
          © {{ 'now' | date: '%Y' }} {{ shop.name }} • {{ section.settings.bottom_line }}
        </div>
      </div>
    </div>
  </div>
</section>

{% if section.settings.enable_countdown %}
<script>
  (function() {
    var target = "{{ section.settings.countdown_target }}";
    if (!target) return;

    // Accepts: YYYY-MM-DDTHH:MM:SS (local) OR YYYY-MM-DD
    var targetDate = new Date(target);
    if (isNaN(targetDate.getTime())) {
      // try YYYY-MM-DD
      targetDate = new Date(target + "T00:00:00");
    }
    if (isNaN(targetDate.getTime())) return;

    var root = document.getElementById("swCountdown");
    if (!root) return;

    var dEl = root.querySelector("[data-d]");
    var hEl = root.querySelector("[data-h]");
    var mEl = root.querySelector("[data-m]");
    var sEl = root.querySelector("[data-s]");

    function pad(n){ return String(n).padStart(2, "0"); }

    function tick(){
      var now = new Date().getTime();
      var diff = targetDate.getTime() - now;
      if (diff < 0) diff = 0;

      var d = Math.floor(diff / (1000*60*60*24));
      var h = Math.floor((diff / (1000*60*60)) % 24);
      var m = Math.floor((diff / (1000*60)) % 60);
      var s = Math.floor((diff / 1000) % 60);

      if (dEl) dEl.textContent = pad(d);
      if (hEl) hEl.textContent = pad(h);
      if (mEl) mEl.textContent = pad(m);
      if (sEl) sEl.textContent = pad(s);
    }

    tick();
    setInterval(tick, 1000);
  })();
</script>
{% endif %}

{% schema %}
{
  "name": "SW Password Page",
  "settings": [
    { "type": "text", "id": "badge_text", "label": "Badge text", "default": "Launching soon" },
    { "type": "text", "id": "heading", "label": "Heading", "default": "We’re building something" },
    { "type": "text", "id": "heading_highlight", "label": "Heading highlight", "default": "beautiful" },
    { "type": "textarea", "id": "subheading", "label": "Subheading", "default": "Our new store experience is on the way. Early access will open soon — stay close." },

    { "type": "image_picker", "id": "logo", "label": "Logo" },

    { "type": "checkbox", "id": "enable_countdown", "label": "Enable countdown", "default": true },
    { "type": "text", "id": "countdown_label", "label": "Countdown label", "default": "Next drop goes live in" },
    { "type": "text", "id": "countdown_target", "label": "Countdown target (YYYY-MM-DD or YYYY-MM-DDTHH:MM:SS)", "default": "2026-01-01T10:00:00" },

    { "type": "text", "id": "form_heading", "label": "Form heading", "default": "Enter password" },
    { "type": "text", "id": "form_subheading", "label": "Form subheading", "default": "If you have access, unlock the store." },
    { "type": "text", "id": "password_placeholder", "label": "Password placeholder", "default": "Store password" },
    { "type": "text", "id": "button_text", "label": "Button text", "default": "Unlock" },
    { "type": "text", "id": "small_help", "label": "Small help text", "default": "Tip: Password is case-sensitive." },

    { "type": "checkbox", "id": "enable_newsletter", "label": "Enable newsletter", "default": true },
    { "type": "text", "id": "newsletter_heading", "label": "Newsletter heading", "default": "Get early access" },
    { "type": "text", "id": "newsletter_subheading", "label": "Newsletter subheading", "default": "Join the list — we’ll notify you first." },
    { "type": "text", "id": "newsletter_placeholder", "label": "Newsletter placeholder", "default": "Email address" },
    { "type": "text", "id": "newsletter_button_text", "label": "Newsletter button", "default": "Notify me" },
    { "type": "text", "id": "newsletter_success", "label": "Newsletter success text", "default": "Done! We’ll reach out soon." },

    { "type": "text", "id": "social_instagram", "label": "Instagram URL" },
    { "type": "text", "id": "social_youtube", "label": "YouTube URL"},
    { "type": "text", "id": "social_facebook", "label": "Facebook URL" },

    { "type": "text", "id": "footer_note", "label": "Footer note near socials", "default": "Follow for updates" },
    { "type": "text", "id": "bottom_line", "label": "Bottom line", "default": "Crafted with care." }
  ],
  "blocks": [
    {
      "type": "chip",
      "name": "Feature chip",
      "settings": [
        { "type": "text", "id": "text", "label": "Chip text", "default": "Fast delivery" }
      ]
    }
  ],
  "max_blocks": 6,
  "presets": [
    {
      "name": "SW Password Page",
      "blocks": [
        { "type": "chip", "settings": { "text": "New arrivals" } },
        { "type": "chip", "settings": { "text": "Limited drops" } },
        { "type": "chip", "settings": { "text": "Exclusive offers" } }
      ]
    }
  ]
}
{% endschema %}
