{% liquid
  assign desktop_nav = section.settings.desktop_navigation
%}
<div data-role="mega-menu" class="mb-w-full">
    <div class="mb-hidden xl:mb-block">
        <div class="">
          <div class="mb-flex mb-gap-[14px] xl:mb-gap-[50px]   mb-flex-wrap mb-justify-center
          xl:mb-justify-center xl:mb-pr-[50px]
          ">
            {% for link in desktop_nav.links %}
              <div data-role="parent-nav">
                {% liquid
                  assign nesting = false
                  assign style = false
                  for block in section.blocks
                    if block.type == 'image_block' and block.settings.parent_nav_title == link.title
                      assign nesting = true
                    endif
                    if block.type == 'style' and block.settings.navigation_title == link.title
                      assign style = true
                      assign color = block.settings.text_color
                    endif
                  endfor
                  if link.levels > 0
                    assign nesting = true
                  endif
                %}
                <a href="{{ link.url }}" {% if style %} style="color:{{ color }}" {% endif %} class="mb-font-body mb-font-medium  mb-py-4  mb-text-mb-accent  mb-text-[16px] mb-relative after:mb-absolute after:mb-top-[96%]  after:mb-w-0 ">{{ link.title }}</a>
                {% if nesting %}
                  {% render 'mega-drop-v2',block:section.blocks,link: link %}
                {% endif %}
              </div>
            {% endfor %}
          </div>
        </div>
    </div>
</div>
