class i extends HTMLElement{constructor(){super(),this.container=this.querySelector('[data-role="container"]'),this.blocks=Array.from(this.querySelectorAll('[data-role="announcement-strip"]')),this.autoplay=this.dataset.autoplay,this.interval=0,this.autplayTime=Number(this.dataset.time)*1e3,this.copyBlocks=this.blocks.filter(t=>t.dataset.beahavior=="copy"),this.redirectionBlocks=this.blocks.filter(t=>t.dataset.behavior=="redirect"),this.nextArrow=this.querySelector('[data-role="next"]'),this.prevArrow=this.querySelector('[data-role="prev"]'),this.nextArrow&&this.nextArrow.addEventListener("click",()=>{this.slider.next()}),this.prevArrow&&this.prevArrow.addEventListener("click",()=>{this.slider.prev()}),this.copyBlocks.forEach(t=>{t.addEventListener("click",()=>{let e=t.dataset.content;this.copyCoupon.call(this,e),this.copyAnimation.call(this,t)})}),this.blocks.forEach(t=>t.addEventListener("click",()=>{this.dataLayerPushOnClick(t)}))}connectedCallback(){window.KeenSlider?(this.blocks.length>1&&this.initializeSlider.call(this),this.blocks.length>1&&this.enableAutoplay.call(this)):window.addEventListener("custom:KeenLoaded",()=>{this.blocks.length>1&&this.initializeSlider.call(this),this.blocks.length>1&&this.enableAutoplay.call(this)})}copyAnimation(t){t.classList.add("copied"),setTimeout(()=>{t.classList.remove("copied")},3e3)}copyCoupon(t){navigator.clipboard.writeText(t)}dataLayerPushOnClick(t){dataLayer.push({event:window.custom_data_events.announcement.events.click,offer_text:t.dataset.text})}enableAutoplay(){this.autoplay&&(this.sliderAutoplay.call(this,!0),this.prevArrow.addEventListener("click",()=>{this.sliderAutoplay.call(this,!1)}),this.blocks.forEach(t=>{t.addEventListener("click",()=>{this.sliderAutoplay.call(this,!1)})}),this.nextArrow.addEventListener("click",()=>{this.sliderAutoplay.call(this,!1)}))}sliderAutoplay(t){clearInterval(this.interval),this.interval=setInterval(()=>{t&&this.slider&&this.slider.next()},this.autplayTime)}initializeSlider(){this.container.style.maxHeight=getComputedStyle(this.container).getPropertyValue("height"),this.slider=new window.KeenSlider(this.container,{loop:!0,slides:{origin:"center",perView:1},vertical:!0})}}customElements.define("announcement-bar",i);
