{"version":3,"file":"deprecations-store.js","sourceRoot":"","sources":["../../../../src/private/node/context/deprecations-store.ts"],"names":[],"mappings":"AAIA,MAAM,iBAAiB,GAAsB;IAC3C,mBAAmB,EAAE,SAAS;CAC/B,CAAA;AAED;;;;GAIG;AACH,MAAM,UAAU,sBAAsB;IACpC,OAAO,iBAAiB,CAAC,mBAAmB,CAAA;AAC9C,CAAC;AAED;;;;GAIG;AACH,MAAM,UAAU,sBAAsB,CAAC,KAAa;IAClD,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC;QAAE,OAAM;IAE5B,MAAM,sBAAsB,GAAG,qBAAqB,CAAC,IAAI,CAAC,GAAG,EAAE,EAAE,KAAK,CAAC,CAAA;IACvE,IAAI,CAAC,sBAAsB;QAAE,OAAM;IAEnC,MAAM,mBAAmB,GAAG,sBAAsB,EAAE,CAAA;IACpD,IAAI,CAAC,mBAAmB,IAAI,sBAAsB,GAAG,mBAAmB,CAAC,OAAO,EAAE,EAAE,CAAC;QACnF,iBAAiB,CAAC,mBAAmB,GAAG,IAAI,IAAI,CAAC,sBAAsB,CAAC,CAAA;IAC1E,CAAC;AACH,CAAC;AAED,SAAS,qBAAqB,CAAC,SAAiB,EAAE,KAAa;IAC7D,MAAM,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAA;IACjD,OAAO,KAAK,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,GAAG,SAAS,CAAC,CAAA;AACtD,CAAC","sourcesContent":["interface DeprecationsStore {\n  nextDeprecationDate: Date | undefined\n}\n\nconst deprecationsStore: DeprecationsStore = {\n  nextDeprecationDate: undefined,\n}\n\n/**\n * Get the earliest date in the future when deprecations will no longer be supported, if any.\n *\n * @returns The next deprecation date.\n */\nexport function getNextDeprecationDate(): Date | undefined {\n  return deprecationsStore.nextDeprecationDate\n}\n\n/**\n * Set the next deprecation date to the earliest date in the future.\n *\n * @param dates - Dates when deprecations will no longer be supported.\n */\nexport function setNextDeprecationDate(dates: Date[]): Date | undefined {\n  if (dates.length < 1) return\n\n  const earliestFutureDateTime = earliestDateTimeAfter(Date.now(), dates)\n  if (!earliestFutureDateTime) return\n\n  const nextDeprecationDate = getNextDeprecationDate()\n  if (!nextDeprecationDate || earliestFutureDateTime < nextDeprecationDate.getTime()) {\n    deprecationsStore.nextDeprecationDate = new Date(earliestFutureDateTime)\n  }\n}\n\nfunction earliestDateTimeAfter(afterTime: number, dates: Date[]): number | undefined {\n  const times = dates.map((date) => date.getTime())\n  return times.sort().find((time) => time > afterTime)\n}\n"]}