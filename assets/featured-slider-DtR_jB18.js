class n extends HTMLElement{connectedCallback(){this.sliderWrapper=this.querySelector('[data-role="slider-wrapper"]'),this.autoplay=this.dataset.autoplay==="true",this.interval=parseInt(this.dataset.slideInterval)||4e3,this.showArrows=this.dataset.showArrows==="true",this.showDots=this.dataset.showDots==="true",this.showPlayPause=this.dataset.showPlayPause==="true",this.enableMobileMulti=this.dataset.enableMobileMulti==="true",this.mobileSlidesPerView=parseFloat(this.dataset.mobileSlidesPerView)||1,this.prevBtn=this.querySelector(".prev-arrow"),this.nextBtn=this.querySelector(".next-arrow"),this.dotsContainer=this.querySelector(".slider-dots"),this.playPauseBtn=this.querySelector(".slider-play-pause"),this.videos=[...this.querySelectorAll("video")],this.playing=this.autoplay,this.autoplayTimer=null,this.initVideoPlayers(),this.waitForKeen(),this.applySchemaVisibility()}applySchemaVisibility(){var s,t,e,i;this.showArrows||((s=this.prevBtn)==null||s.remove(),(t=this.nextBtn)==null||t.remove()),this.showDots||(e=this.dotsContainer)==null||e.remove(),this.showPlayPause||(i=this.playPauseBtn)==null||i.remove()}waitForKeen(){window.KeenSlider?this.initSlider():setTimeout(()=>this.waitForKeen(),100)}initSlider(){this.slider=new KeenSlider(this.sliderWrapper,{loop:!0,slides:{perView:this.enableMobileMulti?this.mobileSlidesPerView:1,spacing:10},breakpoints:{"(min-width: 768px)":{slides:{perView:1,spacing:10}},"(min-width: 1200px)":{slides:{perView:1,spacing:10}}},slideChanged:s=>{this.pauseAllVideos(),this.showDots&&this.updateDots(s.track.details.rel)},created:s=>{var e,i,l,a,o,r;const t=s.track.details.slides.length;t<=1&&((e=this.prevBtn)==null||e.remove(),(i=this.nextBtn)==null||i.remove(),(l=this.dotsContainer)==null||l.remove(),(a=this.playPauseBtn)==null||a.remove()),this.showDots&&t>1&&(this.createDots(t),this.updateDots(0)),this.showArrows&&t>1&&((o=this.prevBtn)==null||o.addEventListener("click",()=>s.prev()),(r=this.nextBtn)==null||r.addEventListener("click",()=>s.next())),this.autoplay&&t>1&&this.initAutoplay(),this.showPlayPause&&t>1&&this.initPlayPauseControls()}})}initAutoplay(){this.autoplayTimer=setInterval(()=>{this.slider&&this.slider.next()},this.interval)}pauseAutoplay(){clearInterval(this.autoplayTimer),this.autoplayTimer=null}toggleAutoplay(){this.playing=!this.playing,this.playing?(this.playPauseBtn.innerHTML=`
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M16 19C14.8954 19 14 18.1046 14 17V7C14 5.89543 14.8954 5 16 5C17.1046 5 18 5.89543 18 7V17C18 18.1046 17.1046 19 16 19ZM8 19C6.89543 19 6 18.1046 6 17V7C6 5.89543 6.89543 5 8 5C9.10457 5 10 5.89543 10 7V17C10 18.1046 9.10457 19 8 19Z" fill="#D9D9D9"/>
        </svg>
      `,this.initAutoplay()):(this.playPauseBtn.innerHTML=`
        <svg width="16" height="16" viewBox="0 0 24 24" fill="white">
          <path d="M8 5v14l11-7z"></path>
        </svg>
      `,this.pauseAutoplay())}initPlayPauseControls(){this.playPauseBtn.addEventListener("click",()=>{this.toggleAutoplay()})}createDots(s){if(this.dotsContainer){this.dotsContainer.innerHTML="";for(let t=0;t<s;t++){let e=document.createElement("button");e.className="dot sw-w-3 sw-h-3 sw-rounded-full sw-bg-white/40",e.dataset.index=t,e.addEventListener("click",()=>{this.slider.moveToIdx(t)}),this.dotsContainer.appendChild(e)}}}updateDots(s){if(!this.dotsContainer)return;this.dotsContainer.querySelectorAll(".dot").forEach((e,i)=>{e.style.background=i===s?"#fff":"rgba(255,255,255,0.4)",i===s?e.classList.add("is-active"):e.classList.remove("is-active")})}pauseAllVideos(){this.videos.forEach(s=>{s.pause();const t=s.closest(".fc-video");if(!t)return;const e=t.querySelector(".fc-video-play");e&&(e.style.display="flex");const i=t.querySelector(".video-poster");i&&(i.style.display="block"),s.removeAttribute("src"),s.load()})}initVideoPlayers(){this.querySelectorAll(".fc-video").forEach(t=>{const e=t.querySelector(".video-poster"),i=t.querySelector("video"),l=t.querySelector(".fc-video-play");!i||!l||(l.addEventListener("click",a=>{a.stopPropagation(),this.pauseAllVideos(),i.src=i.dataset.videoSrc,i.play(),e&&(e.style.display="none"),l.style.display="none",this.pauseAutoplay(),this.playing=!1,this.showPlayPause&&this.playPauseBtn&&(this.playPauseBtn.innerHTML=`
            <svg width="16" height="16" viewBox="0 0 24 24" fill="white">
              <path d="M8 5v14l11-7z"></path>
            </svg>
          `)}),i.addEventListener("click",a=>{a.stopPropagation(),i.paused||(i.pause(),l&&(l.style.display="flex"),e&&(e.style.display="block"))}),i.addEventListener("ended",()=>{l&&(l.style.display="flex"),e&&(e.style.display="block")}))})}}customElements.define("featured-slider-single",n);
